---
- name: Test cv_container
  hosts: cvp
  connection: local
  gather_facts: no
  tasks:
    - name: Create a container on CVP.
      cv_container:
        host: '{{ansible_host}}'
        username: '{{cvp_username}}'
        password: '{{cvp_password}}'
        protocol: https
        container: ansible_container
        parent: Tenant
        action: add

    - name: Show a container on CVP.
      cv_container:
        host: '{{ansible_host}}'
        username: '{{cvp_username}}'
        password: '{{cvp_password}}'
        protocol: https
        container: ansible_container
        parent: Tenant
        action: show
      register: cvp_result

    - name: Display cv_container show result
      debug:
        msg: "{{cvp_result}}"
    
    - name: Delete a container on CVP.
      cv_container:
        host: '{{ansible_host}}'
        username: '{{cvp_username}}'
        password: '{{cvp_password}}'
        protocol: https
        container: ansible_container
        parent: Tenant
        action: delete
    
    - name: Show a container on CVP.
      cv_container:
        host: '{{ansible_host}}'
        username: '{{cvp_username}}'
        password: '{{cvp_password}}'
        protocol: https
        container: ansible_container
        parent: Tenant
        action: show
      register: cvp_result
    
    - name: Display cv_container show result
      debug:
        msg: "{{cvp_result}}"